<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>cors demo</title>

  <link rel="shortcut icon" type="image/png" href="jasmine/lib/jasmine-3.1.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="jasmine/lib/jasmine-3.1.0/jasmine.css">

  <script type="text/javascript" src="jasmine/lib/jasmine-3.1.0/jasmine.js"></script>
  <script type="text/javascript" src="jasmine/lib/jasmine-3.1.0/jasmine-html.js"></script>
  <script type="text/javascript" src="jasmine/lib/jasmine-3.1.0/boot.js"></script>
  <script type="text/javascript" src="jquery.js"></script>
</head>

<body>
  <script type="text/javascript">
    var baseUrl = 'http://localhost:8900/api'

    // jasmine.DEFAULT_TIMEOUT_INTERVAL = 1000;

    describe("跨域测试前端用例", function() {

      it("/get1 应该返回'get1 success'", function(done) {
        var result;
        
        $.ajax({
          url: baseUrl + '/get1'
        }).then(res => {
          result = res;
        });

        setTimeout(function() {
          expect(result).toEqual('get1 success');
          done();
        }, 1000);
      });

      it("/get2 应该返回'get2 success'", function(done) {
        var result;

        $.ajax({
          url: baseUrl + '/get2'
        }).then(res => {
          result = res;
        });

        setTimeout(function() {
          expect(result).toEqual('get2 success');
          done();
        }, 1000);
      });
    });

  </script>
</body>

</html>